{% extends "base.html" %}
{% load static %}
{% load humanize %}

{% block title %}{{ user_profile.user.username }}'s Profile - MockMate{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto px-4 py-8">
  
  <!-- Profile Header -->
  <div class="bg-white shadow-md rounded-xl p-6 flex flex-col sm:flex-row items-center sm:items-start space-y-4 sm:space-y-0 sm:space-x-6 border border-gray-200">
    
    <!-- Profile Picture -->
    {% if user_profile.avatar %}
      <img src="{{ user_profile.avatar.url }}" alt="{{ user_profile.user.username }}"
           class="w-28 h-28 rounded-full object-cover border-2 border-gray-300 shadow-sm">
    {% else %}
      <img src="https://ui-avatars.com/api/?name={{ user_profile.user.username }}"
           alt="{{ user_profile.user.username }}"
           class="w-28 h-28 rounded-full object-cover border-2 border-gray-300 shadow-sm">
    {% endif %}

    <!-- Info -->
    <div class="flex-1">
      <h2 class="text-2xl font-bold text-gray-800">{{ user_profile.user.get_full_name|default:user_profile.user.username }}</h2>
      <p class="text-gray-500">@{{ user_profile.user.username }}</p>
      
      {% if profile_user.bio %}
        <p class="mt-3 text-gray-700 whitespace-pre-line">{{ profile_user.bio }}</p>
      {% endif %}

      <div class="mt-4 flex flex-wrap gap-4 text-sm text-gray-600">
        <span>📚 Posts: {{ posts|length }}</span>
        <span>👍 Likes: {{ user_profile.user.likes.count|default:"0" }}</span>
        <span>🔁 Reposts: {{ user_profile.user.reposts.count|default:"0" }}</span>
      </div>
    </div>
  </div>

  <!-- Posts -->
  <div class="mt-10">
    <h3 class="text-xl font-semibold text-gray-800 mb-4">Posts by {{ user_profile.user.username }}</h3>

    {% for post in posts %}
      {% include "posts/post_card.html" with post=post %}
    {% empty %}
      <p class="text-gray-500 text-center mt-8">This user hasn’t posted anything yet.</p>
    {% endfor %}
  </div>

</div>
{% endblock %}
